# シェアハウスポータル: チラ見せモザイク機能

## スタック
React/Next.js, Node.js, Supabase, NextAuth

## 目的
未ログインでも一部情報をモザイク付きで公開し、「もっと見たい→登録」の導線を作る。マッチングアプリのぼかしUIを参考にする。

## 公開レベル（3段階）

- **公開**: ハウス名、コンセプト、共用設備写真、最寄駅
- **チラ見せ**: 住民写真(blur)、名前(イニシャル)、年齢層(「20代後半」)、職業カテゴリ(「IT系」)、自己紹介の先頭50文字
- **会員限定**: フルネーム、詳細プロフィール、連絡先、チャット、イベント詳細

## 実装要件

### バックエンド（最重要）
- フロントのCSS blurだけで隠すのはNG。Supabase RLS + パブリックビューでマスク済みデータのみ返す
- `GET /api/residents/public`（誰でも、マスク済み）と `GET /api/residents`（認証必須、フル）を分ける
- 画像は未認証時に低解像度サムネのみ配信

### フロント
- `useSession()`で認証状態を判定し、エンドポイントとUIを切り替え
- 未ログインでもページ自体は表示する（リダイレクトしない）
- 作成するコンポーネント:
  - `BlurredImage`: blur(12px) + ロックアイコン + クリックで登録モーダル
  - `MaskedText`: 「田中太郎」→「田***」のようにマスク
  - `TeaserOverlay`: 一覧で最初2〜3件はクリア表示、以降はグラデーションオーバーレイ+「登録して全員を見る」ボタン
  - `LockedSection`: 詳細ページのセクション単位blur + CTA

### 心理演出
- 「他に○人の住民がいます」と人数だけ表示
- スクロールするほどモザイク強化、途中で登録CTA出現
- CTAは目立つが押し付けがましくないバランス

### デザイン
白基調+温かみのあるトーン、モバイルファースト