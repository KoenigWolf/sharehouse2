# DESIGN.md

---

# 設計思想

## 1. 前提

* 目的: 誰がどんな人かが分かり、声をかける心理的ハードルを下げる
* 規模: 最大20人・クローズド
* 重要度: UX・空気感が最重要。パフォーマンス・スケールは不要
* 技術方針: 最強構成ではなく、最短で気持ちいいもの

SaaSではなく、デジタル掲示板＋名簿＋ゆるいSNS

---

## 2. 技術スタック

### フロントエンド

* Next.js 15 (App Router)
* TypeScript
* Tailwind CSS
* shadcn/ui
* Framer Motion (軽めのアニメーション)

理由:

* 開発体験が良い
* Cursor + Claude Code と相性が良い
* UIを壊しにくく、継続的な実装に耐える

### バックエンド

* Supabase (無料枠)

  * PostgreSQL
  * Auth (ID/パスワード)
  * Storage (画像アップロード)
  * Row Level Security

採用しない:

* Firebase（過剰）
* 自前Auth（無駄）
* Prisma + 別DB（学習コスト増）

---

## 3. UI / UX 方針（全体）

### 避けるもの

* 無機質
* SaaS管理画面風
* 白黒ベース＋角ばったカード
* 目立たせるためだけの装飾

### 採用する方向性

* 明るいが静か
* ポップだが主張しない
* 人の気配が感じられる

### UI要素

* トップ: 住民の顔写真グリッド、名前＋一言
* プロフィール: 写真必須、短文自己紹介、最近ハマっていること
* 色: パステル寄り、シャドウは弱め
* 動き: hoverでわずかに反応、モーダルは静かに表示

Framer Motion は 補助的にのみ使用する。

---

## 4. 機能

### 初期必須

* ログイン / ログアウト
* プロフィール閲覧
* 自分のプロフィール編集
* 顔写真アップロード

### あると良い

* 一言ステータス
* タグ (#映画好き #夜型 #猫好き)
* 最終ログイン表示（控えめ）

### 不要

* いいね
* コメント
* DM
  → 人間関係が重くなるため実装しない

---

## 5. 要件定義

### 概要

20人規模のシェアハウス住民向けに、
関係性を可視化・促進するクローズドなポータルサイト。

### 技術スタック

Next.js 15, TypeScript, Tailwind CSS, shadcn/ui, Supabase, Framer Motion

### 認証

* Supabase Auth（ID/パスワード）
* 未ログイン時は全ページアクセス不可

### ユーザー

* 最大20人
* 管理者なし
* 自分のプロフィールのみ編集可能

### プロフィール

* id
* name
* avatarUrl（必須）
* bio
* statusMessage
* tags
* createdAt
* updatedAt

### 機能

* ログイン / ログアウト
* 住民一覧（顔写真グリッド、名前＋一言）
* プロフィール詳細
* プロフィール編集（自分のみ、RLS）
* 画像アップロード（Supabase Storage）

### 非要件

* パフォーマンス最適化不要
* スケーラビリティ考慮不要
* 外部公開不要

---

## 6. ティータイム機能

### 概念

マッチング機能ではなく、
偶発的な1on1のきっかけを作る仕組み。

* 目的: 偶発的な1on1を発生させる
* ゴール: 顔と名前が一致し、声をかけやすくなる
* 性質: 軽い / 強制しない / 失敗しても気まずくならない

イベントではなく「仕組み」として存在する。

### 要件

概要:

* ランダム1on1ティータイム機能
* 参加ONのユーザーのみ対象
* システムが自動マッチング
* マッチ時のみ発生

基本ルール:

* 明示的に参加ONにしたユーザーのみ対象
* いつでもON / OFF切り替え可能
* 必ず2人でマッチ
* 自分自身とはマッチしない
* 同じ相手と短期間で連続マッチしない

UXルール:

* マッチしなかった回は何も起きない
* マッチ不成立は表示しない
* 起きたときだけ存在する仕組み

ユーザー操作:

* 設定: ティータイム参加ON/OFF、希望時間帯（朝/昼/夜、任意）
* マッチ時: 相手の顔写真・名前・一言を表示
  文言は「今日どこかでお茶しよう」程度に留める

データモデル:

* tea_time_settings: user_id, is_enabled, preferred_time
* tea_time_matches: id, user1_id, user2_id, matched_at, status

非要件:

* チャット機能
* 強制参加
* 日程調整
* 評価 / いいね
